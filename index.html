<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Free Wellness Assessment - Discover Your Health Score</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <style>
        .glass-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(31, 38, 135, 0.37);
        }
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
            transition: all 0.3s ease;
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }
        .radio-option {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .radio-option:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        .radio-option.selected .radio-content {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .score-circle {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2rem;
            font-weight: bold;
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50">
    <div class="container mx-auto px-4 py-8">
        <!-- Header -->
        <div class="text-center mb-12">
            <h1 class="text-5xl font-bold text-gray-800 mb-4">
                <i class="fas fa-heartbeat text-red-500 mr-3"></i>
                Wellness Assessment
            </h1>
            <p class="text-xl text-gray-600 max-w-2xl mx-auto">
                Discover your personal wellness score in just 2 minutes and get customized recommendations for optimal health.
            </p>
        </div>

        <!-- Assessment Form -->
        <div id="assessmentForm" class="glass-card p-8 mb-8">
            <!-- Progress Bar -->
            <div class="mb-8">
                <div class="flex justify-between items-center mb-2">
                    <span class="text-sm font-medium text-gray-700">Progress</span>
                    <span id="progressText" class="text-sm font-medium text-gray-700">Question 1 of 8</span>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-3">
                    <div id="progressBar" class="h-3 rounded-full btn-primary transition-all duration-300" style="width: 12.5%"></div>
                </div>
            </div>

            <!-- Questions Container -->
            <div id="questionsContainer">
                <!-- Question 1: Energy -->
                <div class="question-slide" data-question="1">
                    <h3 class="text-2xl font-semibold mb-6 text-gray-800">
                        <i class="fas fa-bolt text-yellow-500 mr-3"></i>
                        How would you rate your energy levels throughout the day?
                    </h3>
                    <div class="grid md:grid-cols-2 gap-4">
                        <div class="radio-option" onclick="selectAnswer(1, 1)">
                            <div class="radio-content p-4 border-2 border-gray-200 rounded-lg">
                                <div class="font-semibold">Very Low Energy</div>
                                <div class="text-sm text-gray-600">Constantly tired, need multiple naps</div>
                            </div>
                        </div>
                        <div class="radio-option" onclick="selectAnswer(1, 3)">
                            <div class="radio-content p-4 border-2 border-gray-200 rounded-lg">
                                <div class="font-semibold">Low Energy</div>
                                <div class="text-sm text-gray-600">Often feel sluggish, afternoon crashes</div>
                            </div>
                        </div>
                        <div class="radio-option" onclick="selectAnswer(1, 5)">
                            <div class="radio-content p-4 border-2 border-gray-200 rounded-lg">
                                <div class="font-semibold">Moderate Energy</div>
                                <div class="text-sm text-gray-600">Decent energy most of the time</div>
                            </div>
                        </div>
                        <div class="radio-option" onclick="selectAnswer(1, 8)">
                            <div class="radio-content p-4 border-2 border-gray-200 rounded-lg">
                                <div class="font-semibold">High Energy</div>
                                <div class="text-sm text-gray-600">Feel energetic and vibrant most days</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Question 2: Sleep -->
                <div class="question-slide hidden" data-question="2">
                    <h3 class="text-2xl font-semibold mb-6 text-gray-800">
                        <i class="fas fa-bed text-blue-500 mr-3"></i>
                        How is your sleep quality?
                    </h3>
                    <div class="grid md:grid-cols-2 gap-4">
                        <div class="radio-option" onclick="selectAnswer(2, 1)">
                            <div class="radio-content p-4 border-2 border-gray-200 rounded-lg">
                                <div class="font-semibold">Very Poor Sleep</div>
                                <div class="text-sm text-gray-600">Frequent insomnia, wake up tired</div>
                            </div>
                        </div>
                        <div class="radio-option" onclick="selectAnswer(2, 3)">
                            <div class="radio-content p-4 border-2 border-gray-200 rounded-lg">
                                <div class="font-semibold">Poor Sleep</div>
                                <div class="text-sm text-gray-600">Trouble falling asleep or staying asleep</div>
                            </div>
                        </div>
                        <div class="radio-option" onclick="selectAnswer(2, 5)">
                            <div class="radio-content p-4 border-2 border-gray-200 rounded-lg">
                                <div class="font-semibold">Fair Sleep</div>
                                <div class="text-sm text-gray-600">Sleep okay most nights</div>
                            </div>
                        </div>
                        <div class="radio-option" onclick="selectAnswer(2, 8)">
                            <div class="radio-content p-4 border-2 border-gray-200 rounded-lg">
                                <div class="font-semibold">Excellent Sleep</div>
                                <div class="text-sm text-gray-600">Fall asleep easily, wake up refreshed</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Question 3: Stress -->
                <div class="question-slide hidden" data-question="3">
                    <h3 class="text-2xl font-semibold mb-6 text-gray-800">
                        <i class="fas fa-brain text-purple-500 mr-3"></i>
                        How well do you manage stress?
                    </h3>
                    <div class="grid md:grid-cols-2 gap-4">
                        <div class="radio-option" onclick="selectAnswer(3, 1)">
                            <div class="radio-content p-4 border-2 border-gray-200 rounded-lg">
                                <div class="font-semibold">Overwhelmed</div>
                                <div class="text-sm text-gray-600">Constantly stressed and anxious</div>
                            </div>
                        </div>
                        <div class="radio-option" onclick="selectAnswer(3, 3)">
                            <div class="radio-content p-4 border-2 border-gray-200 rounded-lg">
                                <div class="font-semibold">High Stress</div>
                                <div class="text-sm text-gray-600">Often feel stressed and worried</div>
                            </div>
                        </div>
                        <div class="radio-option" onclick="selectAnswer(3, 5)">
                            <div class="radio-content p-4 border-2 border-gray-200 rounded-lg">
                                <div class="font-semibold">Moderate Stress</div>
                                <div class="text-sm text-gray-600">Some stress but manageable</div>
                            </div>
                        </div>
                        <div class="radio-option" onclick="selectAnswer(3, 8)">
                            <div class="radio-content p-4 border-2 border-gray-200 rounded-lg">
                                <div class="font-semibold">Well Managed</div>
                                <div class="text-sm text-gray-600">Feel calm and in control most of the time</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Question 4: Physical Health -->
                <div class="question-slide hidden" data-question="4">
                    <h3 class="text-2xl font-semibold mb-6 text-gray-800">
                        <i class="fas fa-heartbeat text-red-500 mr-3"></i>
                        How is your physical health?
                    </h3>
                    <div class="grid md:grid-cols-2 gap-4">
                        <div class="radio-option" onclick="selectAnswer(4, 1)">
                            <div class="radio-content p-4 border-2 border-gray-200 rounded-lg">
                                <div class="font-semibold">Poor Health</div>
                                <div class="text-sm text-gray-600">Multiple health issues, frequent illness</div>
                            </div>
                        </div>
                        <div class="radio-option" onclick="selectAnswer(4, 3)">
                            <div class="radio-content p-4 border-2 border-gray-200 rounded-lg">
                                <div class="font-semibold">Below Average</div>
                                <div class="text-sm text-gray-600">Some ongoing health concerns</div>
                            </div>
                        </div>
                        <div class="radio-option" onclick="selectAnswer(4, 5)">
                            <div class="radio-content p-4 border-2 border-gray-200 rounded-lg">
                                <div class="font-semibold">Average Health</div>
                                <div class="text-sm text-gray-600">Generally healthy with minor issues</div>
                            </div>
                        </div>
                        <div class="radio-option" onclick="selectAnswer(4, 8)">
                            <div class="radio-content p-4 border-2 border-gray-200 rounded-lg">
                                <div class="font-semibold">Excellent Health</div>
                                <div class="text-sm text-gray-600">Feel strong, healthy, and vibrant</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Question 5: Mood -->
                <div class="question-slide hidden" data-question="5">
                    <h3 class="text-2xl font-semibold mb-6 text-gray-800">
                        <i class="fas fa-smile text-green-500 mr-3"></i>
                        How is your mental and emotional wellbeing?
                    </h3>
                    <div class="grid md:grid-cols-2 gap-4">
                        <div class="radio-option" onclick="selectAnswer(5, 1)">
                            <div class="radio-content p-4 border-2 border-gray-200 rounded-lg">
                                <div class="font-semibold">Struggling</div>
                                <div class="text-sm text-gray-600">Often sad, anxious, or depressed</div>
                            </div>
                        </div>
                        <div class="radio-option" onclick="selectAnswer(5, 3)">
                            <div class="radio-content p-4 border-2 border-gray-200 rounded-lg">
                                <div class="font-semibold">Below Average</div>
                                <div class="text-sm text-gray-600">Mood swings, some emotional difficulties</div>
                            </div>
                        </div>
                        <div class="radio-option" onclick="selectAnswer(5, 5)">
                            <div class="radio-content p-4 border-2 border-gray-200 rounded-lg">
                                <div class="font-semibold">Good</div>
                                <div class="text-sm text-gray-600">Generally positive and stable</div>
                            </div>
                        </div>
                        <div class="radio-option" onclick="selectAnswer(5, 8)">
                            <div class="radio-content p-4 border-2 border-gray-200 rounded-lg">
                                <div class="font-semibold">Excellent</div>
                                <div class="text-sm text-gray-600">Feel happy, balanced, and emotionally strong</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Question 6: Weight -->
                <div class="question-slide hidden" data-question="6">
                    <h3 class="text-2xl font-semibold mb-6 text-gray-800">
                        <i class="fas fa-weight text-orange-500 mr-3"></i>
                        How satisfied are you with your weight and body composition?
                    </h3>
                    <div class="grid md:grid-cols-2 gap-4">
                        <div class="radio-option" onclick="selectAnswer(6, 1)">
                            <div class="radio-content p-4 border-2 border-gray-200 rounded-lg">
                                <div class="font-semibold">Very Dissatisfied</div>
                                <div class="text-sm text-gray-600">Significant weight or body image concerns</div>
                            </div>
                        </div>
                        <div class="radio-option" onclick="selectAnswer(6, 3)">
                            <div class="radio-content p-4 border-2 border-gray-200 rounded-lg">
                                <div class="font-semibold">Somewhat Dissatisfied</div>
                                <div class="text-sm text-gray-600">Would like to lose or gain weight</div>
                            </div>
                        </div>
                        <div class="radio-option" onclick="selectAnswer(6, 5)">
                            <div class="radio-content p-4 border-2 border-gray-200 rounded-lg">
                                <div class="font-semibold">Neutral</div>
                                <div class="text-sm text-gray-600">Weight is okay, some minor concerns</div>
                            </div>
                        </div>
                        <div class="radio-option" onclick="selectAnswer(6, 8)">
                            <div class="radio-content p-4 border-2 border-gray-200 rounded-lg">
                                <div class="font-semibold">Very Satisfied</div>
                                <div class="text-sm text-gray-600">Happy with body weight and composition</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Question 7: Exercise -->
                <div class="question-slide hidden" data-question="7">
                    <h3 class="text-2xl font-semibold mb-6 text-gray-800">
                        <i class="fas fa-running text-indigo-500 mr-3"></i>
                        How often do you exercise or engage in physical activity?
                    </h3>
                    <div class="grid md:grid-cols-2 gap-4">
                        <div class="radio-option" onclick="selectAnswer(7, 1)">
                            <div class="radio-content p-4 border-2 border-gray-200 rounded-lg">
                                <div class="font-semibold">Rarely/Never</div>
                                <div class="text-sm text-gray-600">Sedentary lifestyle, no regular exercise</div>
                            </div>
                        </div>
                        <div class="radio-option" onclick="selectAnswer(7, 3)">
                            <div class="radio-content p-4 border-2 border-gray-200 rounded-lg">
                                <div class="font-semibold">Occasionally</div>
                                <div class="text-sm text-gray-600">Exercise 1-2 times per week</div>
                            </div>
                        </div>
                        <div class="radio-option" onclick="selectAnswer(7, 5)">
                            <div class="radio-content p-4 border-2 border-gray-200 rounded-lg">
                                <div class="font-semibold">Regularly</div>
                                <div class="text-sm text-gray-600">Exercise 3-4 times per week</div>
                            </div>
                        </div>
                        <div class="radio-option" onclick="selectAnswer(7, 8)">
                            <div class="radio-content p-4 border-2 border-gray-200 rounded-lg">
                                <div class="font-semibold">Very Active</div>
                                <div class="text-sm text-gray-600">Exercise 5+ times per week, very active lifestyle</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Question 8: Overall Health -->
                <div class="question-slide hidden" data-question="8">
                    <h3 class="text-2xl font-semibold mb-6 text-gray-800">
                        <i class="fas fa-heart text-pink-500 mr-3"></i>
                        Overall, how would you rate your health and vitality?
                    </h3>
                    <div class="grid md:grid-cols-2 gap-4">
                        <div class="radio-option" onclick="selectAnswer(8, 1)">
                            <div class="radio-content p-4 border-2 border-gray-200 rounded-lg">
                                <div class="font-semibold">Poor</div>
                                <div class="text-sm text-gray-600">Feel unwell most of the time</div>
                            </div>
                        </div>
                        <div class="radio-option" onclick="selectAnswer(8, 3)">
                            <div class="radio-content p-4 border-2 border-gray-200 rounded-lg">
                                <div class="font-semibold">Below Average</div>
                                <div class="text-sm text-gray-600">Health could be much better</div>
                            </div>
                        </div>
                        <div class="radio-option" onclick="selectAnswer(8, 5)">
                            <div class="radio-content p-4 border-2 border-gray-200 rounded-lg">
                                <div class="font-semibold">Good</div>
                                <div class="text-sm text-gray-600">Generally healthy and well</div>
                            </div>
                        </div>
                        <div class="radio-option" onclick="selectAnswer(8, 8)">
                            <div class="radio-content p-4 border-2 border-gray-200 rounded-lg">
                                <div class="font-semibold">Excellent</div>
                                <div class="text-sm text-gray-600">Feel amazing, full of life and vitality</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Email Form -->
                <div id="emailForm" class="question-slide hidden" data-question="9">
                    <h3 class="text-2xl font-semibold mb-6 text-gray-800">
                        <i class="fas fa-envelope text-blue-500 mr-3"></i>
                        Get Your Personalized Wellness Plan
                    </h3>
                    <div class="bg-gradient-to-r from-blue-50 to-purple-50 border-l-4 border-blue-400 p-6 mb-6 rounded-lg">
                        <p class="text-blue-800">
                            <i class="fas fa-gift mr-2"></i>
                            Enter your details to receive your personalized wellness recommendations and transformation roadmap instantly!
                        </p>
                    </div>
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                Full Name *
                            </label>
                            <input type="text" id="fullName" required
                                class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                Email Address *
                            </label>
                            <input type="email" id="emailAddress" required
                                class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                Phone Number (Optional)
                            </label>
                            <input type="tel" id="phoneNumber"
                                class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                Primary Health Concern (Optional)
                            </label>
                            <input type="text" id="healthConcern"
                                class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all">
                        </div>
                    </div>
                    <div class="mt-6">
                        <label class="flex items-center">
                            <input type="checkbox" id="emailConsent" required
                                class="w-4 h-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500">
                            <span class="ml-2 text-sm text-gray-600">
                                I agree to receive my personalized wellness plan and helpful health tips via email. You can unsubscribe anytime. *
                            </span>
                        </label>
                    </div>
                </div>
            </div>

            <!-- Navigation Buttons -->
            <div class="flex justify-between items-center mt-8">
                <button id="prevBtn" class="px-6 py-3 bg-gray-300 text-gray-700 rounded-lg font-semibold hidden hover:bg-gray-400 transition-colors" onclick="prevQuestion()">
                    <i class="fas fa-chevron-left mr-2"></i>Previous
                </button>
                <div class="flex-1"></div>
                <button id="nextBtn" class="px-6 py-3 btn-primary text-white rounded-lg font-semibold" onclick="nextQuestion()">
                    Next<i class="fas fa-chevron-right ml-2"></i>
                </button>
                <button id="submitBtn" class="px-8 py-3 btn-primary text-white rounded-lg font-semibold hidden" onclick="submitAssessment()">
                    <i class="fas fa-paper-plane mr-2"></i>Get My Wellness Plan
                </button>
            </div>
        </div>

        <!-- Results Section -->
        <div id="resultsSection" class="glass-card p-8 hidden">
            <div class="text-center mb-8">
                <h2 class="text-4xl font-bold text-gray-800 mb-4">
                    <i class="fas fa-chart-line text-purple-600 mr-3"></i>
                    Your Wellness Assessment Results
                </h2>
                
                <!-- Score Display -->
                <div class="mb-8">
                    <div id="scoreCircle" class="score-circle mx-auto mb-4">
                        <span id="totalScore">0</span><span class="text-2xl">/64</span>
                    </div>
                    <h3 id="scoreLevel" class="text-2xl font-semibold mb-2">Your Wellness Level</h3>
                    <p id="scoreDescription" class="text-lg text-gray-600 max-w-2xl mx-auto"></p>
                </div>

                <!-- Detailed Breakdown -->
                <div class="grid md:grid-cols-2 gap-6 mb-8">
                    <div class="bg-white p-6 rounded-lg shadow-lg">
                        <h4 class="text-xl font-semibold mb-4 text-gray-800">Your Health Categories</h4>
                        <div id="categoryBreakdown" class="space-y-3"></div>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-lg">
                        <h4 class="text-xl font-semibold mb-4 text-gray-800">Priority Improvement Areas</h4>
                        <div id="opportunities" class="space-y-3"></div>
                    </div>
                </div>

                <!-- Call to Action -->
                <div class="bg-gradient-to-r from-purple-600 to-blue-600 text-white p-8 rounded-lg shadow-lg">
                    <h3 class="text-3xl font-bold mb-4">Ready to Transform Your Health?</h3>
                    <p class="text-xl mb-6">Book your complimentary discovery session to create your personalized wellness transformation plan.</p>
                    <button onclick="bookConsultation()" class="px-8 py-4 bg-white text-purple-600 rounded-lg font-bold text-xl hover:bg-gray-100 transition-colors shadow-lg">
                        <i class="fas fa-calendar-alt mr-3"></i>Claim My Free Discovery Session Now
                    </button>
                    <p class="text-sm mt-4 opacity-90">
                        <i class="fas fa-clock mr-2"></i>Limited spots available - Book now to secure your transformation journey!
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // David's Google Apps Script Web App URL
        const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbx0Ghx20qBfnV5rPUHOT99aikmsyaEnahYiductvhmB7qSE0Pf05ujG59WoqRbn0lgDsQ/exec';

        let currentQuestion = 1;
        let totalQuestions = 9;
        let answers = {};

        function selectAnswer(questionNum, value) {
            answers[questionNum] = value;
            
            // Visual feedback - clear all selections first
            const allOptions = document.querySelectorAll(`[data-question="${questionNum}"] .radio-option`);
            allOptions.forEach(option => {
                option.classList.remove('selected');
            });
            
            // Highlight selected option
            const selectedOption = document.querySelector(`[data-question="${questionNum}"] .radio-option[onclick="selectAnswer(${questionNum}, ${value})"]`);
            if (selectedOption) {
                selectedOption.classList.add('selected');
            }

            // Auto-advance after selection with a small delay for visual feedback
            setTimeout(() => {
                if (currentQuestion < 8) {
                    nextQuestion();
                } else if (currentQuestion === 8) {
                    nextQuestion(); // Go to email form
                }
            }, 600);
        }

        function nextQuestion() {
            if (currentQuestion < totalQuestions) {
                document.querySelector(`[data-question="${currentQuestion}"]`).classList.add('hidden');
                currentQuestion++;
                document.querySelector(`[data-question="${currentQuestion}"]`).classList.remove('hidden');
                updateProgress();
                updateButtons();
            }
        }

        function prevQuestion() {
            if (currentQuestion > 1) {
                document.querySelector(`[data-question="${currentQuestion}"]`).classList.add('hidden');
                currentQuestion--;
                document.querySelector(`[data-question="${currentQuestion}"]`).classList.remove('hidden');
                updateProgress();
                updateButtons();
            }
        }

        function updateProgress() {
            const progressPercentage = (currentQuestion / totalQuestions) * 100;
            document.getElementById('progressBar').style.width = progressPercentage + '%';
            
            if (currentQuestion <= 8) {
                document.getElementById('progressText').textContent = `Question ${currentQuestion} of 8`;
            } else {
                document.getElementById('progressText').textContent = `Final Step - Get Your Results`;
            }
        }

        function updateButtons() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const submitBtn = document.getElementById('submitBtn');

            // Show/hide previous button
            if (currentQuestion === 1) {
                prevBtn.classList.add('hidden');
            } else {
                prevBtn.classList.remove('hidden');
            }

            // Show/hide next vs submit button
            if (currentQuestion === 9) {
                nextBtn.classList.add('hidden');
                submitBtn.classList.remove('hidden');
            } else {
                nextBtn.classList.remove('hidden');
                submitBtn.classList.add('hidden');
            }
        }

        function submitAssessment() {
            // Validate required fields
            const fullName = document.getElementById('fullName').value.trim();
            const emailAddress = document.getElementById('emailAddress').value.trim();
            const emailConsent = document.getElementById('emailConsent').checked;
            
            if (!fullName || !emailAddress || !emailConsent) {
                alert('Please fill in your name, email address, and agree to receive your wellness plan.');
                return;
            }
            
            // Email validation
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(emailAddress)) {
                alert('Please enter a valid email address.');
                return;
            }
            
            // Get optional fields
            const phoneNumber = document.getElementById('phoneNumber').value.trim();
            const healthConcern = document.getElementById('healthConcern').value.trim();
            
            // Show loading state
            const submitBtn = document.getElementById('submitBtn');
            const originalText = submitBtn.innerHTML;
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Sending...';
            submitBtn.disabled = true;
            
            // Send to Google Sheets first
            submitToGoogleSheets(fullName, emailAddress, phoneNumber, () => {
                // Success callback - show results
                calculateAndShowResults({
                    fullName,
                    emailAddress,
                    phoneNumber,
                    healthConcern,
                    answers
                });
                
                // Reset button
                submitBtn.innerHTML = originalText;
                submitBtn.disabled = false;
            }, () => {
                // Error callback - still show results but log the error
                console.error('Failed to submit to Google Sheets, but showing results anyway');
                calculateAndShowResults({
                    fullName,
                    emailAddress,
                    phoneNumber,
                    healthConcern,
                    answers
                });
                
                // Reset button
                submitBtn.innerHTML = originalText;
                submitBtn.disabled = false;
            });
        }

        function submitToGoogleSheets(name, email, phone, successCallback, errorCallback) {
            // Calculate total score
            let totalScore = 0;
            for (let i = 1; i <= 8; i++) {
                totalScore += answers[i] || 0;
            }

            const data = {
                name: name,
                email: email,
                phone: phone || '',
                totalScore: totalScore,
                energyScore: answers[1] || 0,
                sleepScore: answers[2] || 0,
                stressScore: answers[3] || 0
            };
            
            console.log('Sending data to Google Sheets:', data);
            
            fetch(GOOGLE_SCRIPT_URL, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data),
                mode: 'no-cors' // Important for Google Apps Script
            })
            .then(() => {
                console.log('Data sent to Google Sheets successfully');
                if (successCallback) successCallback();
            })
            .catch((error) => {
                console.error('Error sending to Google Sheets:', error);
                if (errorCallback) errorCallback();
            });
        }

        function calculateAndShowResults(userData) {
            // Calculate total score
            let totalScore = 0;
            for (let i = 1; i <= 8; i++) {
                totalScore += answers[i] || 0;
            }

            // Hide assessment form and show results
            document.getElementById('assessmentForm').classList.add('hidden');
            document.getElementById('resultsSection').classList.remove('hidden');
            
            // Scroll to top of results
            document.getElementById('resultsSection').scrollIntoView({ behavior: 'smooth' });

            // Display score with animation
            document.getElementById('totalScore').textContent = totalScore;

            // Determine score level and description
            let scoreLevel, scoreDescription;
            if (totalScore <= 20) {
                scoreLevel = "Transformation Opportunity";
                scoreDescription = "Your results show tremendous potential for positive change! Small, targeted improvements in key areas can create dramatic shifts in how you feel every day. You're perfectly positioned for a breakthrough.";
            } else if (totalScore <= 35) {
                scoreLevel = "Building Momentum";
                scoreDescription = "You're on a positive path with solid foundations! With some strategic optimizations, you can unlock significantly higher levels of energy, vitality, and wellbeing. Great progress awaits.";
            } else if (totalScore <= 50) {
                scoreLevel = "Strong Foundation";
                scoreDescription = "You have excellent wellness habits and awareness! Fine-tuning your approach and adding some advanced strategies will help you achieve peak performance and feel absolutely amazing.";
            } else {
                scoreLevel = "Wellness Champion";
                scoreDescription = "Outstanding! You're already practicing high-level wellness. Let's explore cutting-edge optimization strategies to help you maintain this excellence and reach even higher peaks of vitality.";
            }

            document.getElementById('scoreLevel').textContent = scoreLevel;
            document.getElementById('scoreDescription').textContent = scoreDescription;

            // Generate detailed breakdown
            generateCategoryBreakdown();
            generateOpportunities();

            // Show thank you message
            setTimeout(() => {
                const message = `Thank you ${userData.fullName}! 🎉\n\nYour personalized wellness plan has been sent to ${userData.emailAddress}.\n\nPlease check your inbox (and spam folder) in the next few minutes for detailed recommendations.\n\nYour wellness score: ${totalScore}/64`;
                alert(message);
            }, 1500);
        }

        function generateCategoryBreakdown() {
            const categories = [
                { name: 'Energy Levels', value: answers[1] || 0, icon: 'fas fa-bolt', max: 8, color: 'yellow' },
                { name: 'Sleep Quality', value: answers[2] || 0, icon: 'fas fa-bed', max: 8, color: 'blue' },
                { name: 'Stress Management', value: answers[3] || 0, icon: 'fas fa-brain', max: 8, color: 'purple' },
                { name: 'Physical Health', value: answers[4] || 0, icon: 'fas fa-heartbeat', max: 8, color: 'red' },
                { name: 'Mental Wellbeing', value: answers[5] || 0, icon: 'fas fa-smile', max: 8, color: 'green' },
                { name: 'Weight Satisfaction', value: answers[6] || 0, icon: 'fas fa-weight', max: 8, color: 'orange' },
                { name: 'Exercise Frequency', value: answers[7] || 0, icon: 'fas fa-running', max: 8, color: 'indigo' },
                { name: 'Overall Health', value: answers[8] || 0, icon: 'fas fa-heart', max: 8, color: 'pink' }
            ];
            
            const breakdown = document.getElementById('categoryBreakdown');
            breakdown.innerHTML = '';
            
            categories.forEach(category => {
                const percentage = (category.value / category.max) * 100;
                let statusClass, statusColor;
                
                if (percentage >= 75) {
                    statusClass = 'text-green-600 bg-green-100';
                    statusColor = 'bg-green-500';
                } else if (percentage >= 50) {
                    statusClass = 'text-blue-600 bg-blue-100';
                    statusColor = 'bg-blue-500';
                } else if (percentage >= 25) {
                    statusClass = 'text-yellow-600 bg-yellow-100';
                    statusColor = 'bg-yellow-500';
                } else {
                    statusClass = 'text-red-600 bg-red-100';
                    statusColor = 'bg-red-500';
                }
                
                breakdown.innerHTML += `
                    <div class="flex items-center justify-between p-3 rounded-lg ${statusClass}">
                        <div class="flex items-center">
                            <i class="${category.icon} mr-3 text-lg"></i>
                            <span class="font-medium">${category.name}</span>
                        </div>
                        <div class="flex items-center">
                            <div class="w-20 bg-gray-300 rounded-full h-3 mr-3">
                                <div class="h-3 rounded-full ${statusColor} transition-all duration-1000" style="width: ${percentage}%"></div>
                            </div>
                            <span class="font-bold text-sm">${category.value}/${category.max}</span>
                        </div>
                    </div>
                `;
            });
        }

        function generateOpportunities() {
            const categories = [
                { name: 'Energy Optimization', value: answers[1] || 0, tip: 'Discover advanced energy-boosting techniques and optimal nutrition timing' },
                { name: 'Sleep Enhancement', value: answers[2] || 0, tip: 'Master sleep hygiene protocols for deep, restorative rest' },
                { name: 'Stress Mastery', value: answers[3] || 0, tip: 'Learn powerful stress transformation and resilience-building methods' },
                { name: 'Physical Vitality', value: answers[4] || 0, tip: 'Address root causes and optimize your body\'s natural healing capacity' },
                { name: 'Emotional Wellbeing', value: answers[5] || 0, tip: 'Develop emotional intelligence and mental clarity practices' },
                { name: 'Weight Optimization', value: answers[6] || 0, tip: 'Create a sustainable, personalized body composition strategy' },
                { name: 'Movement Integration', value: answers[7] || 0, tip: 'Design an enjoyable, results-driven fitness approach' },
                { name: 'Holistic Health', value: answers[8] || 0, tip: 'Integrate all wellness pillars for exponential health gains' }
            ];
            
            // Sort by lowest scores (biggest opportunities)
            categories.sort((a, b) => a.value - b.value);
            
            const opportunities = document.getElementById('opportunities');
            opportunities.innerHTML = '';
            
            // Show top 4 opportunities
            categories.slice(0, 4).forEach((category, index) => {
                const priorityColors = ['bg-red-500', 'bg-orange-500', 'bg-yellow-500', 'bg-blue-500'];
                opportunities.innerHTML += `
                    <div class="flex items-start p-3 bg-gray-50 rounded-lg">
                        <div class="flex-shrink-0 w-8 h-8 ${priorityColors[index]} text-white rounded-full flex items-center justify-center text-sm font-bold mr-4 mt-1">
                            ${index + 1}
                        </div>
                        <div class="flex-1">
                            <div class="font-semibold text-gray-800 mb-1">${category.name}</div>
                            <div class="text-sm text-gray-600">${category.tip}</div>
                        </div>
                    </div>
                `;
            });
        }

        function bookConsultation() {
            // Create a more engaging booking experience
            const message = `🎯 Ready to Transform Your Health?\n\n✨ Book your complimentary Discovery Session now!\n\nDuring this session, you'll:\n• Get a personalized wellness roadmap\n• Discover your biggest health leverage points\n• Learn proven transformation strategies\n• Create your step-by-step action plan\n\n📞 Call now: +44 7508 117864\n📧 Email: david@fuelgeist.co.uk\n\nLimited spots available - Book today!`;
            
            alert(message);
            
            // Optional: Open phone dialer or email client
            // window.location.href = 'tel:+447508117864';
            // window.location.href = 'mailto:david@fuelgeist.co.uk?subject=Discovery Session Booking&body=Hi David, I just completed the wellness assessment and would like to book my complimentary discovery session.';
        }

        // Initialize the assessment
        document.addEventListener('DOMContentLoaded', function() {
            updateProgress();
            updateButtons();
            
            // Add some loading animation to the progress bar
            setTimeout(() => {
                document.getElementById('progressBar').style.transition = 'width 0.3s ease';
            }, 100);
        });

        // Add keyboard navigation
        document.addEventListener('keydown', function(e) {
            if (e.key === 'ArrowRight' || e.key === 'Enter') {
                if (currentQuestion < 9 && document.getElementById('nextBtn').style.display !== 'none') {
                    nextQuestion();
                }
            } else if (e.key === 'ArrowLeft') {
                if (currentQuestion > 1) {
                    prevQuestion();
                }
            }
        });
    </script>
</body>
</html>
    <script id="html_badge_script1">
        window.__genspark_remove_badge_link = "https://www.genspark.ai/api/html_badge/" +
            "remove_badge?token=To%2FBnjzloZ3UfQdcSaYfDpDNM%2BsAgwJGFvD9AKZv%2BYKmfaibN8SWSOThbqQK6kcwCfystgvy8ZzpBZvf%2FnHUpqVSQI9yoPqfTC8EyrMXj5PwP8yFc5vZMDFWbbHZ8K%2BWoqgzubS9USih00Tn%2BwYKxkbbs2kFxRoOcdCENnglAycF9vC8luUajdfjFrbeblL1B0y1p31cuEjqGr1Npuw%2F5GpHJZmxL7kx1vP%2Bz%2B8Dp1V7n8o86tMDCf0ZKxh8mYRV0cre2wJaqGjySUZ7gSHVjpXTjpmyNOctP7ldR32McF5wDVExMI7VmNtCXvWHoLscqT8vTuS0el13MYnpd9fjgglE6t7%2FsTsVXXQ9o5JQcdqJcLDC3s6N4kCfr1oNVzI6Kpps8lSXUaly9g%2BkePZ5f%2F8OZBb%2Bnm6JFNBBs6sKmo%2FAF3vMH3AtcbRxNQfRgcXiMUD3bg2iabvJHFBssKtHFoEF8ooFrvy1RsIPh%2BOtmmUjAqjHcVvaJFcv7ijOEZLmkCYzifnP7%2FhRQME%2FtSU1dfVENlyedi0z4VZAkv3d%2B5k%3D";
        window.__genspark_locale = "en-US";
        window.__genspark_token = "To/BnjzloZ3UfQdcSaYfDpDNM+sAgwJGFvD9AKZv+YKmfaibN8SWSOThbqQK6kcwCfystgvy8ZzpBZvf/nHUpqVSQI9yoPqfTC8EyrMXj5PwP8yFc5vZMDFWbbHZ8K+WoqgzubS9USih00Tn+wYKxkbbs2kFxRoOcdCENnglAycF9vC8luUajdfjFrbeblL1B0y1p31cuEjqGr1Npuw/5GpHJZmxL7kx1vP+z+8Dp1V7n8o86tMDCf0ZKxh8mYRV0cre2wJaqGjySUZ7gSHVjpXTjpmyNOctP7ldR32McF5wDVExMI7VmNtCXvWHoLscqT8vTuS0el13MYnpd9fjgglE6t7/sTsVXXQ9o5JQcdqJcLDC3s6N4kCfr1oNVzI6Kpps8lSXUaly9g+kePZ5f/8OZBb+nm6JFNBBs6sKmo/AF3vMH3AtcbRxNQfRgcXiMUD3bg2iabvJHFBssKtHFoEF8ooFrvy1RsIPh+OtmmUjAqjHcVvaJFcv7ijOEZLmkCYzifnP7/hRQME/tSU1dfVENlyedi0z4VZAkv3d+5k=";
    </script>
    
    <script id="html_notice_dialog_script" src="https://www.genspark.ai/notice_dialog.js"></script>
    
